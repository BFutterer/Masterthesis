<!DOCTYPE html>																																	<!--to start server type benedikt@BF-LinuxMint ~/Schreibtisch/Valhalla/valhalla $ valhalla_route_service valhalla.json 1 in a Terminal-->
<html>
	<head>
		<title>Accessibility Analysis</title>
		<meta charset="utf-8" />
		<link rel="shortcut icon" type="image/png" href="../pictures/favicon.png">
	  <meta name="viewport" content="width=device-width, initial-scale=1.0">			<!--media query - for mobile devices-->

		<!--Include Leaflet-->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>

		<!--Include jQuery-->
		<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script> <!--sha256 hash to check if the jQuery code has not changedin comparison to the code that it was to the time of embedding-->

		<!--include easyButton extension of Leaflet	https://github.com/CliffCloud/Leaflet.EasyButton 	http://danielmontague.com/projects/easyButton.js/-->
		<link rel="stylesheet" href="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.css">
		<script src="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.js"></script>

		<!--include sidebar extension of Leaflet	https://github.com/Turbo87/leaflet-sidebar 	https://github.com/Turbo87/sidebar-v2-->
		<link rel="stylesheet" href="sidebar.css" />
		<script src="sidebar.js"></script>

		<!--include geocoder extension of Leaflet	https://github.com/k4r573n/leaflet-control-osm-geocoder-->
		<script src="Control.OSMGeocoder.js"></script>
		<link rel="stylesheet" href="Control.OSMGeocoder.css" />

		<!--include tab functionality	https://www.w3schools.com/howto/howto_js_tabs.asp-->
		<link rel="stylesheet" href="tab_style.css" />
		<script src="bodyLoadScript.js"></script>

		<!--Include own files-->
		<link rel="stylesheet" href="style.css" />
		<script>
			var map;
			var osmLayer;
		</script>
		<script src="file_handling.js"></script>
		<script src="check_accessibility.js"></script>
		<script src="tab_functionality.js"></script>
		<script src="map.js"></script>

	</head>
<!-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
	<body onload="onBodyLoad()">																									<!--neue JS Datei erstellen mit einer Funktion onBodyLoad(), in der alle Befehle dieser Datei drin sind, die in sonst keiner Funktion enthalten sind-->
		<div id="container">

			<div id="sidebar">
				<div class="tab">																												<!--https://www.w3schools.com/howto/howto_js_tabs.asp-->
  				<button class="tablinks active" onclick="openTab(event, 'Settings')" id="defaultOpen">Settings</button>
  				<button class="tablinks" onclick="openTab(event, 'Menu')">Menu</button>
					<button class="tablinks" onclick="openTab(event, 'Imprint')">Imprint</button>
  				<button class="tablinks" onclick="openTab(event, 'Further')">Further</button>
				</div>

				<div id="Settings" class="tabcontent active">
		      <h3>Settings</h3>
						<form>																															<!--change the values of the variables-->
							<table>
								<tbody>
									<tr>
										<td>
											<b>Vehicle:</b>
										</td>
										<td>
											<select id= "select_vehicle" name="vehicle" size="1" onchange=" generateIsochrones()">	<!--choose of a vehicle and set this vehicle for computing the costs (cost = this.value)-->
												<option value="bicycle">Bicycle</option>
												<option value="bus">Bus</option>
												<option value="auto" selected="selected">Car, Motorcylce, Truck (shortest time)</option>
									 	 		<option value="auto_shorter">Car (shortest path)</option>
									  		<option value="hov">High-Occupancy Vehicle (HOV)</option>	<!--Kfz in dem mehr als eine Person sitzt-->
												<option value="multimodal">Multimodal</option>
									  		<option value="pedestrian">Pedestrian</option>
												<option value="truck">Truck</option>
												<option value="firetruck">Firetruck</option>
											</select>
										</td>
									</tr>

									<tr>
										<td>
											<b>Isochrones:</b>
										</td>
										<td>
											<select id="polygon_value" name="area" size="1" onchange= "generateIsochrones()">	<!--choose whether the reachable area should be shown via isolines or via polygons (polygon = this.value)-->
												<option value=false selected="selected">Isolines</option>
									 	 		<option value=true>Polygons</option>
											</select>
										</td>
									</tr>

									<tr>
										<td>																													<!--define a value for denoise-->
											<span
												title="A floating point value from 0 to 1 which can be used to remove smaller contours. A value of 1 will only return the largest contour for a given time value. A value of 0.5 drops any contours that are less than half the area of the largest contour in the set of contours for that same time value. A value of 0 will return all contours for a time value.">
												<b>Denoise:</b>
											</span>
										</td>
										<td>
											<input id="denoise_value" type="number" min="0" max="1" step="0.1" value="0.2" onchange="generateIsochrones()">
										</td>
									</tr>

									<tr>
										<td>																													<!--define a value for the generalization-->
											<span
												title="A (floating point) value in meters used as the tolerance for Douglas-Peucker generalization. Note: Generalization of contours can lead to self-intersections, as well as intersections of adjacent contours.">
												<b>Generalization:</b>
											</span>
										</td>
										<td>
											<input id="generalization_value" type="number" min="0" max="1000" step="1" value="0" onchange="generateIsochrones()">
										</td>
									</tr>
									<tr>
										<td>																													<!--define a value for the time in minutes-->
											<span
												title="Duration of the travel time in minutes. For each minute an isochrone will be shown.">
												<b>Travel time:</b>
											</span>
										</td>
										<td>
											<input id="minutes_value" type="number" min="1" max="20" step="1" value="4" onchange="minutes = this.value, generateIsochrones()">
										</td>																													<!-- -> change before installation valhalla/scripts/valhalla_build_config line 179-183-->
									</tr>
									<tr>
										<td>																													<!--define a name for the isoline request-->
											<b>Name:</b>
										</td>
										<td>
											<input id="giveId" type="text"  name="setName" value="cityname" onchange="generateIsochrones()">
										</td>
									</tr>
								</tbody>
							</table>
						</form>
					</div>

					<div id="Menu" class="tabcontent">
						<h3>Menu</h3>

						<button type="button" id= "clearMap"title="Remove all layers from the map" onclick="clearAllFromMap();">Clear map</button>

						<form>
							<table>
								<tbody>
									<tr>
										<td>
											<h5>File handling</h5>
										</td>
									</tr>
									<tr>
										<td>
											<!--Export-Button-->
											<a href="#" id="export"><button type="button" title="Save result to a geoJSON file">Save Result</button></a>			<!--# = placeholder for the export link, will be overwritten in file_handling.js line 37-->
										</td>
									</tr>
									<tr>
										<td>
											<!--Import-Button-->
											<input type="file" id="import" name="files[]" multiple accept=".geojson" method="post" enctype="multipart/form-data" style="display:none;"/>			<!--HTML 5 file API (input type="file"), which only accept geoJSON files (accept=".geojson")	https://stackoverflow.com/questions/26878854/open-file-dialog-when-input-type-button--->
											<input type="button" value="Load File" title="Load one or several geoJSON files to the map" onclick="document.getElementById('import').click();" />
											<script>
												document.getElementById('import').addEventListener('change', handleFileSelect, false);
											</script>
										</td>
									</tr>
									<tr>
										<td>
											<!--Merge-Button-->
											<input type="file" id="merge" name="files[]" multiple accept=".geojson" method="post" enctype="multipart/form-data" style="display:none;"/>			<!--HTML 5 file API (input type="file"), which only accept geoJSON files (accept=".geojson")	https://stackoverflow.com/questions/26878854/open-file-dialog-when-input-type-button--->
											<input type="button" value="Merge File" title="Merge several geoJSON files to a single one" onclick="document.getElementById('merge').click();" />
											<script>
												document.getElementById('merge').addEventListener('change', mergeSelected, false);
											</script>
										</td>
									</tr>
								</tbody>
							</table>
						</form>

						<h5>Check accessibility</h5>

						<form onSubmit="return buttonPressed">																															<!--change the values of the variables-->
							<table>
								<tbody>
									<tr>
										<td>																													<!--define a name for the isoline request-->
											<b title="Check if the complete area of the defined city or region can be reached within the defined time interval from the start location">City or region:</b>
										</td>
									</tr>
									<tr>
										<td>
											<input id="city_value" type="text"  name="setCityName" value="" title="Insert the name of a city or region" onchange="city = this.value, getBoundaryURL()" onkeypress="handleEnter(event)">		<!--onClick="buttonPressed=true;"-->
										</td>
										<td>
											<button type = "submit" id= "submitCity">submit</button>
										</td>
									</tr>
									<tr>
										<td>
											<select id="selectedCity_value"  size="1" title="choose the city you meant" onchange="deleteBoundaryLayer(), selectedCity = this.value, drawCityBoundary()">
    										<option>Choose correct city</option>
											</select>
										</td>
									</tr>
								</tbody>
							</table>
						</form>
					</div>																																<!--/Menu-->

					<div id="Imprint" class="tabcontent">
						<h3>Imprint</h3>
						Imprint stuff can be placed here
					</div>

					<div id="Further" class="tabcontent">
						<h3>Further</h3>
						Further setting stuff can be placed here
					</div>
    		</div>																																	<!--/sidebar-->

	  		<div id="map"></div>
		</div>																																			<!--/container-->
	</body>
</html>
